====== Datei-Behandlung ======
===== Pruefen ob Datei existiert =====

Mit ''.datei'' und der Option Test koennen Sie pruefen, ob eine Datei existiert.

<code fo>
.datei -TEST 'Dateiname' 
</code>

===== Oeffnen von ASCII-Dateien =====

Empfehlung: Das Oeffnen von Dateien sollte immer mit der Option Test erfolgen, weil damit im Vorfeld schon geprueft wird, ob die bereits vorhanden ist. -> Variante 2!!!

==== Variante 1 ====

<code fo>
.datei -ÖFFNEN xdescr "dateiname"
</code>

Bei -ÖFFNEN wird nicht gelesen. Existiert die angegebene Datei nicht oder fehlen die Leserechte, so liegt ein Fehler vor und 'mehr' wird auf "false" gesetzt. Die Fehlerbehandlung ist davon abhängig, ob die Option -TEST angegeben wurde oder nicht.

  * Fehlerbehandlung **ohne**  ''-TEST'': Es ist keine eigene Fehlerbehandlung notwendig, aber das Programm bricht ab.
  * Fehlerbehandlung **mit**  ''-TEST'': Das Programm gibt keine Meldung aus und läuft weiter. Die spezifische Fehlerursache muss, falls von Interesse, mit ''[[.:dev:system|.SYSTEM]]'' ermittelt werden. Die Variable ''MEHR'' ist gesetzt und muss unbedingt abgefragt werden.

Dieses Kommando ist geeignet, wenn die Datei nicht zwangsläufig vorhanden sein muss oder wenn eine Fehlerbehebung möglich ist. Liegt kein Fehler vor, so wird nach dem Öffnen die Datei nicht mehr über ihren Dateinamen, sondern nur noch über die FO-Variable 'Deskriptorname' zugegriffen. Diese muss eine Variablen vom Typ "INT" und bereits deklariert sein (.ART). Sie enthält nach dem Befehl eine kleine Zahl, den Deskriptor der Datei. Bis zu zehn Dateien können geöffnet werden. Beim Versuch, mehr Dateien zu öffnen, erfolgt ein Fehlerabbruch. ((abas-Onlinehilfe)).

==== Variante 2 ====

<code fo>
.datei -TEST -ÖFFNEN xdescr "dateiname"
</code>

<note important>
Die Systemvariable ''MEHR'' liefert **true**, wenn die Datei existiert. Achtung! Es koennen Dateinamen nur in GROSSBUCHSTABEN abgefragt werden. Ziemlich beknackt, muss man nur wissen. Als nicht auf ''Schnittstelle'', ''schnittstelle'' sondern ''SCHNITTSTELLE''. So muss diese auch im Dateisystem stehen, sonst liefert ''MEHR'' **false**. Moeglich ist aber eine Angabe von Verzeichnissen wie z. B. ''win/SCHNITTSTELLEN''.
</note>

<note warning>
Vergessen Sie nicht, die Datei wieder zu schliessen. Sonst kann es zur einer Fehlermeldung kommen, dass zu viele Dateien offen sind. 
</note>

<code fo>
.datei -SCHLIESSEN xdescr
</code>

